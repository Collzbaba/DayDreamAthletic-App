{"ast":null,"code":"import _regeneratorRuntime from\"/Users/blessedadodo/Desktop/DayDreamAthletic-App/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/blessedadodo/Desktop/DayDreamAthletic-App/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/blessedadodo/Desktop/DayDreamAthletic-App/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/blessedadodo/Desktop/DayDreamAthletic-App/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/blessedadodo/Desktop/DayDreamAthletic-App/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Button from'react-bootstrap/Button';import Modal from'react-bootstrap/Modal';import React,{useEffect}from'react';import{useState}from'react';import{useMutation}from'@apollo/client';import LoginIcon from'../assets/img/loginicon.svg';import Form from'react-bootstrap/Form';import{useRef}from'react';import{ADD_USER}from'../utils/mutations';import Auth from'../utils/auth';import Login from'./login';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Signup=function Signup(){var _useState=useState({email:'',password:''}),_useState2=_slicedToArray(_useState,2),formState=_useState2[0],setFormState=_useState2[1];var _useMutation=useMutation(ADD_USER),_useMutation2=_slicedToArray(_useMutation,2),addUser=_useMutation2[0],_useMutation2$=_useMutation2[1],error=_useMutation2$.error,data=_useMutation2$.data;var handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setFormState(_objectSpread(_objectSpread({},formState),{},_defineProperty({},name,value)));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var _yield$addUser,_data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setErrMsg('');e.preventDefault();console.log(formState);if(!(formState.email===''||formState.password==='')){_context.next=7;break;}setErrMsg(\"Invalid email or password\");_context.next=19;break;case 7:_context.prev=7;_context.next=10;return addUser({variables:_objectSpread({},formState)});case 10:_yield$addUser=_context.sent;_data=_yield$addUser.data;Auth.login(_data.addProfile.token);window.location.reload(false);_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](7);console.error(_context.t0);case 19:;case 20:case\"end\":return _context.stop();}}},_callee,null,[[7,16]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),show=_useState4[0],setShow=_useState4[1];var handleClose=function handleClose(){return setShow(false);};var handleShow=function handleShow(){return setShow(true);};var userRef=useRef();var errRef=useRef();var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),errMsg=_useState6[0],setErrMsg=_useState6[1];var _useState7=useState('false'),_useState8=_slicedToArray(_useState7,2),success=_useState8[0],setSuccess=_useState8[1];return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"section\",{className:\"login-btn-container-nav\",children:[/*#__PURE__*/_jsx(Button,{variant:\"primary login-icon-modal\",onClick:handleShow,children:/*#__PURE__*/_jsx(\"img\",{src:LoginIcon,className:\"nav-btn-icons\"})}),/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,backdrop:\"static\",keyboard:false,centered:true,children:[/*#__PURE__*/_jsx(\"div\",{className:\"signup-info\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"YOUR DAY DREAM CLUB BENEFITS AWAIT!\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"signup-discount\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Sign up now and get 10% off on select products!\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-login-signup-form-container\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{className:\"signup-title-modal\",children:\"SIGN UP\"})}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,className:\"d-flex\",children:[/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"Email\",className:\"m-2 modal-login-signup-form \",\"aria-label\":\"Search\",name:\"email\",value:formState.email,onChange:handleChange}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Password\",className:\"m-2 modal-login-signup-form \",\"aria-label\":\"Search\",name:\"password\",value:formState.password,onChange:handleChange})]}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"primary modal-bottom-btn\",type:\"submit\",children:\"SUBMIT\"})})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"forgot-password\",children:[/*#__PURE__*/_jsx(\"p\",{style:{color:'#ff2d2d'},ref:errRef,\"aria-live\":\"assertive\",children:errMsg}),/*#__PURE__*/_jsx(Login,{})]})]})]})});};export default Signup;","map":{"version":3,"names":["Button","Modal","React","useEffect","useState","useMutation","LoginIcon","Form","useRef","ADD_USER","Auth","Login","Signup","email","password","formState","setFormState","addUser","error","data","handleChange","event","target","name","value","handleSubmit","e","setErrMsg","preventDefault","console","log","variables","login","addProfile","token","window","location","reload","show","setShow","handleClose","handleShow","userRef","errRef","errMsg","success","setSuccess","color"],"sources":["/Users/blessedadodo/Desktop/DayDreamAthletic-App/client/src/components/signup.js"],"sourcesContent":["import Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\nimport React, { useEffect } from 'react';\nimport { useState } from 'react';\nimport { useMutation } from '@apollo/client';\nimport LoginIcon from '../assets/img/loginicon.svg'\nimport Form from 'react-bootstrap/Form';\nimport { useRef } from 'react';\nimport {ADD_USER} from '../utils/mutations';\nimport Auth from '../utils/auth';\nimport Login from './login';\n\nconst Signup = () => {\n  const [formState, setFormState] = useState({\n    email: '',\n    password: '',\n  });\n  const [addUser, { error, data }] = useMutation(ADD_USER);\n  const handleChange = (event) => {\n    const { name, value } = event.target;\n\n    setFormState({\n      ...formState,\n      [name]: value,\n    });\n  };\n  const handleSubmit = async (e) => {\n    setErrMsg('');\n    e.preventDefault();\n    console.log(formState);\n    if(formState.email === '' || formState.password === ''){\n      setErrMsg(\"Invalid email or password\");\n    }else{\n    try {\n      const { data } = await addUser({\n        variables: { ...formState },\n      });\n      Auth.login(data.addProfile.token);\n      window.location.reload(false);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  };\n\n  const [show, setShow] = useState(false);\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n  const userRef = useRef();\n  const errRef = useRef();\n  const [errMsg, setErrMsg] = useState('');\n  const [success, setSuccess] = useState('false');\n\n  return (\n    <>\n\n      <section className='login-btn-container-nav'>\n        <Button variant=\"primary login-icon-modal\" onClick={handleShow}>\n          <img src={LoginIcon} className=\"nav-btn-icons\"></img>\n        </Button>\n\n        <Modal\n          show={show}\n          onHide={handleClose}\n          backdrop=\"static\"\n          keyboard={false}\n          centered\n        >\n          \n          <div className='signup-info'>\n            <h2>YOUR DAY DREAM CLUB BENEFITS AWAIT!</h2>\n          </div>\n          <div className='signup-discount'>\n            <p>Sign up now and get 10% off on select products!</p>\n          </div>\n\n          <div className='modal-login-signup-form-container'>\n            <div>\n              <Modal.Header closeButton>\n                <Modal.Title className='signup-title-modal'>SIGN UP</Modal.Title>\n\n              </Modal.Header>\n              <Form  onSubmit={handleSubmit} className=\"d-flex\">\n              <Modal.Body>\n                  <Form.Control\n                    type=\"email\"\n                    placeholder=\"Email\"\n                    className=\"m-2 modal-login-signup-form \"\n                    aria-label=\"Search\"\n                    name=\"email\"\n                    value={formState.email}\n                    onChange={handleChange}\n                  />\n                  <Form.Control\n                    type=\"password\"\n                    placeholder=\"Password\"\n                    className=\"m-2 modal-login-signup-form \"\n                    aria-label=\"Search\"\n                    name=\"password\"\n                    value={formState.password}\n                    onChange={handleChange}\n                  />\n              </Modal.Body>\n              <Modal.Footer>\n                <Button variant=\"primary modal-bottom-btn\" type=\"submit\">SUBMIT</Button>\n              </Modal.Footer>\n              </Form>\n            </div>\n            \n          </div>\n          <div className='forgot-password'>\n          <p style={{color: '#ff2d2d'}} ref={errRef} aria-live=\"assertive\">{errMsg}</p>\n            <Login/>\n          </div>\n        </Modal>\n      </section>\n    </>\n  );\n}\n\nexport default Signup;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}