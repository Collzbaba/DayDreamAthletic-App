{"ast":null,"code":"import _regeneratorRuntime from\"/Users/blessedadodo/Desktop/DayDreamAthletic-App/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/blessedadodo/Desktop/DayDreamAthletic-App/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/blessedadodo/Desktop/DayDreamAthletic-App/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/blessedadodo/Desktop/DayDreamAthletic-App/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/blessedadodo/Desktop/DayDreamAthletic-App/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Button from'react-bootstrap/Button';import Modal from'react-bootstrap/Modal';import React,{useEffect}from'react';import{useState}from'react';import{useMutation}from'@apollo/client';import Form from'react-bootstrap/Form';import{useRef}from'react';import{LOGIN_USER}from'../utils/mutations';import Auth from'../utils/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(props){var _useState=useState({email:'',password:''}),_useState2=_slicedToArray(_useState,2),formState=_useState2[0],setFormState=_useState2[1];var _useMutation=useMutation(LOGIN_USER),_useMutation2=_slicedToArray(_useMutation,2),login=_useMutation2[0],_useMutation2$=_useMutation2[1],error=_useMutation2$.error,data=_useMutation2$.data;// update state based on form input changes\nvar handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setFormState(_objectSpread(_objectSpread({},formState),{},_defineProperty({},name,value)));};function refreshPage(){window.location.reload(false);}// submit form\nvar handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var _yield$login,_data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setErrMsg('');event.preventDefault();console.log(formState);if(!(formState.email===''||formState.password==='')){_context.next=7;break;}setErrMsg(\"Invalid email or password\");_context.next=19;break;case 7:_context.prev=7;_context.next=10;return login({variables:_objectSpread({},formState)});case 10:_yield$login=_context.sent;_data=_yield$login.data;Auth.login(_data.login.token);_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](7);console.error(_context.t0);case 18:// clear form values\nsetFormState({email:'',password:''});case 19:case\"end\":return _context.stop();}}},_callee,null,[[7,15]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),show=_useState4[0],setShow=_useState4[1];var handleClose=function handleClose(){return setShow(false);};var handleShow=function handleShow(){return setShow(true);};var userRef=useRef();var errRef=useRef();var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),errMsg=_useState6[0],setErrMsg=_useState6[1];var _useState7=useState('false'),_useState8=_slicedToArray(_useState7,2),success=_useState8[0],setSuccess=_useState8[1];return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"section\",{className:\"login-btn-container-nav\",children:[/*#__PURE__*/_jsx(\"a\",{onClick:handleShow,children:\"Already have an acoount? Login\"}),/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,backdrop:\"static\",keyboard:false,centered:true,children:[/*#__PURE__*/_jsx(\"div\",{className:\"signup-info\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"YOUR DAY DREAM CLUB BENEFITS AWAIT!\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"signup-discount\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Sign up now and get 10% off on select products!\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-login-signup-form-container\",children:/*#__PURE__*/_jsxs(\"div\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"LOGIN\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(Form,{className:\"d-flex\",children:[/*#__PURE__*/_jsx(Form.Control,{type:\"text\",id:\"username\",ref:userRef,autoComplete:\"off\",onChange:handleChange,value:formState.email,required:true,name:\"email\",label:\"username\",placeholder:\"Email\",className:\"m-2 modal-login-signup-form \",\"aria-label\":\"email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",id:\"password\",autoComplete:\"off\",onChange:handleChange,value:formState.password,required:true,placeholder:\"Password\",name:\"password\",className:\"m-2 modal-login-signup-form \",\"aria-label\":\"Search\"})]})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{onClick:handleSubmit,variant:\"primary modal-bottom-btn\",type:\"submit\",children:\"SUBMIT\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"forgot-password\",children:[/*#__PURE__*/_jsx(\"p\",{style:{color:'#ff2d2d'},ref:errRef,\"aria-live\":\"assertive\",children:errMsg}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",children:\"Forgot your password?\"})]})]})]})});};export default Login;","map":{"version":3,"names":["Button","Modal","React","useEffect","useState","useMutation","Form","useRef","LOGIN_USER","Auth","Login","props","email","password","formState","setFormState","login","error","data","handleChange","event","target","name","value","refreshPage","window","location","reload","handleSubmit","setErrMsg","preventDefault","console","log","variables","token","show","setShow","handleClose","handleShow","userRef","errRef","errMsg","success","setSuccess","color"],"sources":["/Users/blessedadodo/Desktop/DayDreamAthletic-App/client/src/components/login.js"],"sourcesContent":["import Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\nimport React, { useEffect } from 'react';\nimport { useState } from 'react';\nimport { useMutation } from '@apollo/client';\nimport Form from 'react-bootstrap/Form';\nimport { useRef } from 'react';\nimport {LOGIN_USER} from '../utils/mutations';\nimport Auth from '../utils/auth';\n\nconst Login = (props) => {\n  const [formState, setFormState] = useState({ \n    email: '',\n    password: ''\n  });\n  const [login, { error, data }] = useMutation(LOGIN_USER);\n\n  // update state based on form input changes\n  const handleChange = (event) => {\n    const { name, value } = event.target;\n\n    setFormState({\n      ...formState,\n      [name]: value,\n    });\n  };\n\n  function refreshPage() {\n    window.location.reload(false);\n  }\n  // submit form\n  const handleSubmit = async (event) => {\n    setErrMsg('');\n    event.preventDefault();\n    console.log(formState);\n    if(formState.email === '' || formState.password === ''){\n      setErrMsg(\"Invalid email or password\");\n    }else{\n    try {\n      const { data } = await login({\n        variables: { ...formState },\n      });\n\n      Auth.login(data.login.token);\n    } catch (e) {\n      console.error(e);\n    }\n    // clear form values\n    setFormState({\n      email: '',\n      password: '',\n    });\n  }\n  };\n\n  const [show, setShow] = useState(false);\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n  const userRef = useRef();\n  const errRef = useRef();\n  const [errMsg, setErrMsg] = useState('');\n  const [success, setSuccess] = useState('false');\n\n  return (\n    <>\n\n      <section className='login-btn-container-nav'>\n        <a onClick={handleShow}>Already have an acoount? Login</a>\n\n        <Modal\n          show={show}\n          onHide={handleClose}\n          backdrop=\"static\"\n          keyboard={false}\n          centered\n        >\n          <div className='signup-info'>\n            <h2>YOUR DAY DREAM CLUB BENEFITS AWAIT!</h2>\n          </div>\n          <div className='signup-discount'>\n            <p>Sign up now and get 10% off on select products!</p>\n          </div>\n\n          <div className='modal-login-signup-form-container'>\n            <div onSubmit={handleSubmit}>\n              <Modal.Header closeButton>\n                <Modal.Title>LOGIN</Modal.Title>\n\n              </Modal.Header>\n              <Modal.Body>\n                <Form className=\"d-flex\">\n                  <Form.Control\n                    type=\"text\"\n                    id=\"username\"\n                    ref={userRef}\n                    autoComplete=\"off\"\n                    onChange={handleChange}\n                    value={formState.email}\n                    required\n                    name=\"email\"\n                    label=\"username\"\n                    placeholder=\"Email\"\n                    className=\"m-2 modal-login-signup-form \"\n                    aria-label=\"email\"\n                  />\n                  <Form.Control\n                    type=\"password\"\n                    id=\"password\"\n                    autoComplete=\"off\"\n                    onChange={handleChange}\n                    value={formState.password}\n                    required\n                    placeholder=\"Password\"\n                    name=\"password\"\n                    className=\"m-2 modal-login-signup-form \"\n                    aria-label=\"Search\"\n                  />\n                </Form>\n              </Modal.Body>\n              <Modal.Footer>\n                <Button onClick={handleSubmit} variant=\"primary modal-bottom-btn\" type=\"submit\">SUBMIT</Button>\n              </Modal.Footer>\n            </div>\n          </div>\n          <div className='forgot-password'>\n            <p style={{color: '#ff2d2d'}} ref={errRef} aria-live=\"assertive\">{errMsg}</p>\n            <a href=\"#\">Forgot your password?</a>\n          </div>\n        </Modal>\n      </section>\n    </>\n  );\n}\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}